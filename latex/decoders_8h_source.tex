\hypertarget{decoders_8h_source}{}\doxysection{decoders.\+h}
\mbox{\hyperlink{decoders_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef DECODERS\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define DECODERS\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <limits.h>}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} addToothLogEntry(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} toothTime);}
\DoxyCodeLine{7 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{int} stdGetRPM();}
\DoxyCodeLine{8 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} setFilter(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_ac18ba0a2c1dbaf6235400f7fd4023743}{curGap}});}
\DoxyCodeLine{9 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{int} crankingGetRPM(\textcolor{keywordtype}{byte} totalTeeth);}
\DoxyCodeLine{10 \textcolor{keywordtype}{void} \mbox{\hyperlink{decoders_8h_ac5680f0930cef991664953059185343a}{triggerSetup\_missingTooth}}();}
\DoxyCodeLine{11 \textcolor{keywordtype}{void} \mbox{\hyperlink{decoders_8h_adebf2bba4336ed45b68b494b866898d5}{triggerPri\_missingTooth}}();}
\DoxyCodeLine{12 \textcolor{keywordtype}{void} \mbox{\hyperlink{decoders_8h_acd03c2839f2094fc61107c178ebb1ce4}{triggerSec\_missingTooth}}();}
\DoxyCodeLine{13 \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a5983b881aa8086b7792620317b70582f}{getRPM\_missingTooth}}();}
\DoxyCodeLine{14 \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a9462cd7f52b96ceea6a4bd0b08d4301f}{getCrankAngle\_missingTooth}}(\textcolor{keywordtype}{int} timePerDegree);}
\DoxyCodeLine{15 \textcolor{keywordtype}{void} \mbox{\hyperlink{decoders_8h_a8cc959dce8f58d38ce75c5b17ea02d40}{triggerSetup\_DualWheel}}();}
\DoxyCodeLine{16 \textcolor{keywordtype}{void} \mbox{\hyperlink{decoders_8h_a51200f7a26c2e0a220c48d894c760ecd}{triggerPri\_DualWheel}}();}
\DoxyCodeLine{17 \textcolor{keywordtype}{void} \mbox{\hyperlink{decoders_8h_aa8a4b398bf1303ac0862c854e4a8ba32}{triggerSec\_DualWheel}}();}
\DoxyCodeLine{18 \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a0407cc77bc4cc932f5778163ef6c1c44}{getRPM\_DualWheel}}();}
\DoxyCodeLine{19 \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_afad4b6bd74917f35ba9d64ba56f147f3}{getCrankAngle\_DualWheel}}(\textcolor{keywordtype}{int} timePerDegree);}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a9026a9c5d90202a2c5edf446c18311c0}{curTime}};}
\DoxyCodeLine{23 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_ac18ba0a2c1dbaf6235400f7fd4023743}{curGap}};}
\DoxyCodeLine{24 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a59eda7c50b47e1df0e122f367f0201fa}{curTime2}};}
\DoxyCodeLine{25 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a283a7f0f69cb28a9582a4388eca996f5}{curGap2}};}
\DoxyCodeLine{26 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a6c79b70e0eb86cd98ddf348af152c761}{lastGap}};}
\DoxyCodeLine{27 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a581f2bcc9bef8295750b0da5e024b572}{targetGap}}; }
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{keyword}{volatile} \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a1b79cf76e9130babad3e942d66d2c6c5}{toothCurrentCount}} = 0; \textcolor{comment}{//The current number of teeth (Onec sync has been achieved, this can never actually be 0}}
\DoxyCodeLine{30 \textcolor{keyword}{volatile} \textcolor{keywordtype}{byte} \mbox{\hyperlink{decoders_8h_a850b5bd646b55b24342c9b2fb552f16a}{toothSystemCount}} = 0; \textcolor{comment}{//Used for decoders such as Audi 135 where not every tooth is used for calculating crank angle. This variable stores the actual number of teeth, not the number being used to calculate crank angle}}
\DoxyCodeLine{31 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a5b364049047b5c3f2d551b06d6402308}{toothSystemLastToothTime}} = 0; \textcolor{comment}{//As below, but used for decoders where not every tooth count is used for calculation}}
\DoxyCodeLine{32 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a1016cfc7bbb3d0431923926e7feb5481}{toothLastToothTime}} = 0; \textcolor{comment}{//The time (micros()) that the last tooth was registered}}
\DoxyCodeLine{33 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a4d9c0dc167e08696c7e059de46e8f2a9}{toothLastSecToothTime}} = 0; \textcolor{comment}{//The time (micros()) that the last tooth was registered on the secondary input}}
\DoxyCodeLine{34 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_aabb6a1901d1bf5d76e6965f5ec287bf3}{toothLastMinusOneToothTime}} = 0; \textcolor{comment}{//The time (micros()) that the tooth before the last tooth was registered}}
\DoxyCodeLine{35 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_aa0a6dce932427a5d9e0256d40ffb01af}{toothOneTime}} = 0; \textcolor{comment}{//The time (micros()) that tooth 1 last triggered}}
\DoxyCodeLine{36 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_afeac5cbe5557c16b1ea5e4c579988f8e}{toothOneMinusOneTime}} = 0; \textcolor{comment}{//The 2nd to last time (micros()) that tooth 1 last triggered}}
\DoxyCodeLine{37 \textcolor{keyword}{volatile} \textcolor{keywordtype}{bool} \mbox{\hyperlink{decoders_8h_afce12e6bb920a5a0e061554aa2959221}{revolutionOne}} = 0; \textcolor{comment}{// For sequential operation, this tracks whether the current revolution is 1 or 2 (not 1)}}
\DoxyCodeLine{38 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_ae89249f3d9695d946948dad05cf716db}{toothHistory}}[\mbox{\hyperlink{globals_8h_a466e3c2a473e5c8a2bae6bb6efe37b88}{TOOTH\_LOG\_BUFFER}}];}
\DoxyCodeLine{39 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a406ba2c8645f7c8ffd3ccb8a01e9f167}{toothHistoryIndex}} = 0;}
\DoxyCodeLine{40 \textcolor{keyword}{volatile} \textcolor{keywordtype}{bool} \mbox{\hyperlink{decoders_8h_a7b9c18c8d54445542abdf2e929a4fe8b}{toothLogRead}} = \textcolor{keyword}{false}; \textcolor{comment}{//Flag to indicate whether the current tooth log values have been read out yet}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{keyword}{volatile} \textcolor{keywordtype}{byte} \mbox{\hyperlink{decoders_8h_a044cc65fd5aa8764ec2b1ad9e7fe2e5c}{secondaryToothCount}}; \textcolor{comment}{//Used for identifying the current secondary (Usually cam) tooth for patterns with multiple secondary teeth}}
\DoxyCodeLine{43 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_a9e6b984eae540372f54e1d00c0798fd5}{secondaryLastToothTime}} = 0; \textcolor{comment}{//The time (micros()) that the last tooth was registered (Cam input)}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45 \textcolor{keyword}{volatile} \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a7549e04409b56a5da688f2e8d329cbb7}{triggerActualTeeth}};}
\DoxyCodeLine{46 \textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_ad777a1893f4c22552d9a538aa5a73ae9}{triggerFilterTime}}; \textcolor{comment}{// The shortest time (in uS) that pulses will be accepted (Used for debounce filtering)}}
\DoxyCodeLine{47 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a08a321314e8c9af55ee9ce687cb631e3}{triggerSecFilterTime}}; \textcolor{comment}{// The shortest time (in uS) that pulses will be accepted (Used for debounce filtering) for the secondary input}}
\DoxyCodeLine{48 \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a15518dcfbd47c061c8a8e61984b275a8}{triggerToothAngle}}; \textcolor{comment}{//The number of crank degrees that elapse per tooth}}
\DoxyCodeLine{49 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{decoders_8h_af132ab2aede03e9cfe5b035d9f688908}{revolutionTime}}; \textcolor{comment}{//The time in uS that one revolution would take at current speed (The time tooth 1 was last seen, minus the time it was seen prior to that)}}
\DoxyCodeLine{50 \textcolor{keywordtype}{bool} \mbox{\hyperlink{decoders_8h_a1e54fcad7f7d745202e811045120842b}{secondDerivEnabled}}; \textcolor{comment}{//The use of the 2nd derivative calculation is limited to certain decoders. This is set to either true or false in each decoders setup routine}}
\DoxyCodeLine{51 \textcolor{keywordtype}{bool} \mbox{\hyperlink{decoders_8h_a4d018ef97f19ddbb5dc92ef2b81ce5b4}{decoderIsSequential}}; \textcolor{comment}{//Whether or not the decoder supports sequential operation}}
\DoxyCodeLine{52 \textcolor{keywordtype}{byte} \mbox{\hyperlink{decoders_8h_a16c057b337892e5c1999ebc7425f52b3}{checkSyncToothCount}}; \textcolor{comment}{//How many teeth must've been seen on this revolution before we try to confirm sync (Useful for missing tooth type decoders)}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{keywordtype}{int} \mbox{\hyperlink{decoders_8h_a6f75ddfaf3a3aa9c68b8f4ac5062a46e}{toothAngles}}[24]; \textcolor{comment}{//An array for storing fixed tooth angles. Currently sized at 24 for the GM 24X decoder, but may grow later if there are other decoders that use this style}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{comment}{//Used for identifying long and short pulses on the 4G63 (And possibly other) trigger patterns}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#define LONG 0;}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#define SHORT 1;}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
