<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: timers.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">timers.h</div></div>
</div><!--header-->
<div class="contents">
<a href="timers_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">/*</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">NOTE - This file and it&#39;s associated functions need a CLEARER NAME</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"></span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">//Purpose</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">We&#39;re implementing a lower frequency interrupt loop to perform calculations that are needed less often, some of which depend on time having passed (delta/time) to be meaningful. </span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"></span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"></span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">//Technical</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">Timer2 is only 8bit so we are setting the prescaler to 128 to get the most out of it. This means that the counter increments every 0.008ms and the overflow at 256 will be after 2.048ms</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">Max Period = (Prescale)*(1/Frequency)*(2^8)</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">(See http://arduinomega.blogspot.com.au/2011/05/timer2-and-overflow-interrupt-lets-get.html)</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"></span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">We&#39;re after a 1ms interval so we&#39;ll need 131 intervals to reach this ( 1ms / 0.008ms per tick = 125). </span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">Hence we will preload the timer with 131 cycles to leave 125 until overflow (1ms).</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment"></span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">*/</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#ifndef TIMERS_H</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#define TIMERS_H</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno"><a class="line" href="timers_8h.html#addb1d95ed45d9a5adbd6c03caa4b2861">   22</a></span><span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="timers_8h.html#addb1d95ed45d9a5adbd6c03caa4b2861">loop250ms</a>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno"><a class="line" href="timers_8h.html#a1321f3ca7623708598b3751940e9b343">   23</a></span><span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="timers_8h.html#a1321f3ca7623708598b3751940e9b343">loopSec</a>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="timers_8h.html#acff029f314b3884fdb071afa6af8bb06">   24</a></span><span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code hl_variable" href="timers_8h.html#acff029f314b3884fdb071afa6af8bb06">targetOverdwellTime</a>;</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno"><a class="line" href="timers_8h.html#a153f9bd64ceed82b65317b4042263d75">   25</a></span><span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code hl_variable" href="timers_8h.html#a153f9bd64ceed82b65317b4042263d75">targetTachoPulseTime</a>;</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#if defined (CORE_TEENSY)</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  IntervalTimer lowResTimer;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="timers_8h.html#a1810db7313ccf1b647a57d8c978c25c6">   30</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="timers_8h.html#a1810db7313ccf1b647a57d8c978c25c6">initialiseTimers</a>();</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#endif </span><span class="comment">// TIMERS_H</span></div>
<div class="ttc" id="atimers_8h_html_a1321f3ca7623708598b3751940e9b343"><div class="ttname"><a href="timers_8h.html#a1321f3ca7623708598b3751940e9b343">loopSec</a></div><div class="ttdeci">volatile int loopSec</div><div class="ttdef"><b>Definition:</b> timers.h:23</div></div>
<div class="ttc" id="atimers_8h_html_a153f9bd64ceed82b65317b4042263d75"><div class="ttname"><a href="timers_8h.html#a153f9bd64ceed82b65317b4042263d75">targetTachoPulseTime</a></div><div class="ttdeci">volatile unsigned long targetTachoPulseTime</div><div class="ttdef"><b>Definition:</b> timers.h:25</div></div>
<div class="ttc" id="atimers_8h_html_a1810db7313ccf1b647a57d8c978c25c6"><div class="ttname"><a href="timers_8h.html#a1810db7313ccf1b647a57d8c978c25c6">initialiseTimers</a></div><div class="ttdeci">void initialiseTimers()</div></div>
<div class="ttc" id="atimers_8h_html_acff029f314b3884fdb071afa6af8bb06"><div class="ttname"><a href="timers_8h.html#acff029f314b3884fdb071afa6af8bb06">targetOverdwellTime</a></div><div class="ttdeci">volatile unsigned long targetOverdwellTime</div><div class="ttdef"><b>Definition:</b> timers.h:24</div></div>
<div class="ttc" id="atimers_8h_html_addb1d95ed45d9a5adbd6c03caa4b2861"><div class="ttname"><a href="timers_8h.html#addb1d95ed45d9a5adbd6c03caa4b2861">loop250ms</a></div><div class="ttdeci">volatile int loop250ms</div><div class="ttdef"><b>Definition:</b> timers.h:22</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
